\documentclass[a4paper,12pt,twoside]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage[french]{babel}
\usepackage{url,csquotes}
\usepackage[hidelinks,hyperfootnotes=false]{hyperref}
\usepackage[titlepage,fancysections,pagenumber]{polytechnique}


\title{De la mise en page à l'École}
\subtitle{Petit guide à l'installation de \textrm{\LaTeX}\\et du package \textup{\texttt{polytechnique v1.3.5}}}
\author{Denis \bsc{Merigoux}}
\logo{logo.pdf}

\begin{document}

\maketitle

\section{Introduction}

Le binet TypographiX, refondé par la promotion X2013 pendant son tronc commun, s'est donné pour objectif de faciliter pour les élèves la création de documents respectant la nouvelle charte graphique de l'École, tout en développant l'usage du moteur typographique \LaTeX.

En collaboration avec la Direction de la communication, le binet est fier de vous présenter le package \texttt{polytechnique}, qui met en page automatiquement le document \LaTeX{} qui l'inclut avec une présentation soignée reprenant les logotypes de l'X et les codes de la charte graphique.

Ce document a pour objet de documenter l'utilisation de ce package mais avant tout de donner aux élèves la procédure nécessaire à l'installation de \LaTeX{} et l'inclusion de ce package dans leur documents. Pour ce qui est de l'utilisation du logiciel et de la marche à suivre pour produire son premier document, on pourra se référer avec profit à la \textbf{page LaTeX du WikiX} ou à d'autres tutoriels en ligne.

\section{Installation de \rmfamily{\LaTeX}}

\LaTeX est un logiciel libre et il en existe de multiples distributions, ainsi les solutions que je présente par la suite ne sont pas uniques. Néanmoins elles ont l'avantage de marcher...

\subsection{Windows}

\begin{enumerate}
	\item Télécharge la dernière version de MiKTeX sur \url{http://miktex.org/download}.
	\item Lance l'installation. \textbf{Attention !} Lorsqu'un menu déroulant te propose de choisir pour \emph{Install missing packages on-the-fly}, clique sur \emph{Yes} et non pas \emph{Ask me first} comme sélectionné par défaut.
	\item Une fois l'installation terminée, cherche dans \enquote{Tous les programmes} l'utilitaire \emph{Update (Admin)}, puis lance-le. \textbf{Attention !} Si tu es sur le réseau de l'X, clique sur \emph{Connection settings} puis entre l'adresse du proxy (\texttt{kuzh.polytechnique.fr} port \texttt{8080}). Ensuite, choisis \emph{Nearest package repository}, clique sur \emph{Suivant} puis attends (ça peut durer 3 minutes). Quand la liste apparaît, coche tout et lance la mise à jour des packages.
	\item Lance l'utilitaire \emph{Settings (Admin)} puis clique tour à tour sur les boutons \emph{Refresh FNDB} et \emph{Update formats}. Il faudra répéter cette dernière opération à chaque fois que vous installerez de nouveaux packages.
\end{enumerate}

Il faut ensuite installer un éditeur de code source, par exemple TeXmaker qui est disponible sur toutes les plate-formes.

\subsection{Macintosh}

Il suffit de télécharger et d'installer MacTeX depuis \url{https://tug.org/mactex/}. 

Il faut ensuite installer un éditeur de code source, par exemple TeXmaker qui est disponible sur toutes les plate-formes.

\subsection{GNU/Linux}

Le paquet à installer est \texttt{texlive-full} ou \texttt{texlive}. Tu auras peut-être aussi besoin d'installer d'autres paquets pour manipuler les fichiers produits par LaTex mais comme tu es sous Linux, on va supposer que tu sais chercher de l'aide en ligne. Il existe d'excellents éditeurs LaTeX sous GNU/Linux, par exemple Kile (pour KDE), TeXmaker ...

\section{Installation du package}

\subsection{Prérequis}

\subsubsection{Packages requis}

Pour que le package puisse fonctionner, il faut que ta distribution LaTeX contienne les packages suivants : \texttt{ifthen}, \texttt{ifpdf}, \texttt{titlesec}, \texttt{graphicx}, \texttt{geometry}, \texttt{calc}, \texttt{lmodern} et \texttt{color}.

La plupart sont présents par défaut dans les installations standards mais si vous avez à la compilation une erreur du type \verb|Error : file titlesec.sty not found|, c'est que tu n'as pas installé le package \texttt{titlesec}.

\subsubsection{Installer les packages manquants}

La méthode décrite ici est générale et s'applique à chaque fois qu'il faut installer un package manquant.

\paragraph{Windows} Dans tous les programmes (ou \emph{via} la fonction rechercher dans Windows 8) lancer l'utilitaire \emph{Package Manager (Admin)}. La liste des packages LaTeX disponibles se charge après un temps de latence. 
\begin{itemize}
	\item Si tu es sur le réseau de l'X,  clique sur \emph{Repository}, puis \emph{Change package repository}. Coche la case \emph{Packages shall be downloaded from the Internet} puis clique sur \emph{Connections settings}. Une petite fenêtre appraît, coche \emph{Use a proxy server}. Dans le champ \emph{Adress} entre \texttt{kuzh.polytechnique.fr} et dans le champ \emph{Port} entre \texttt{8080}.
	\item Si tu es sur un réseau sans proxy, ignore cette étape.
\end{itemize}
Sélectionne le ou les packages à installer dans la liste (tu peux rechercher leur nom) et clique sur le petit \texttt{+} en haut à droite. L'installation devrait se lancer normalement. Enfin, lance l'utilitaire \emph{Settings (Admin)} depuis \emph{Tous les programmes} et clique sur \emph{Refresh FNDB}.

\paragraph{Mac} Pour mettre à jour ou installer des packages, il faut utiliser l'application \emph{Tex Live utility}, dont un tutoriel en français très bien fourni est disponible à l'adresse suivante : \url{http://www.cuk.ch/articles/4466}. Voici des instructions succintes : dans le dossier \emph{Applications/TeX}, lancer l'utilitaire \emph{TeX Live Utility}. Dans l'onglet \emph{Manage Packages}, sélectionner le package à installer et cliquer sur le bouton \emph{Install}.

\paragraph{Linux} Dans un terminal, exécuter la commande 
\begin{verbatim}
tlmgr install <nom du package>
\end{verbatim}


\subsection{Installation du package \texttt{polytechnique}}

\subsubsection{Méthode automatique}

\textbf{Avertissement.} Les instructions de la méthode automatique sont pour la plupart anciennes. Se référer au fichier \texttt{README.md} pour Unix, et à la méthode manuelle pour Windows.

Extraire le dossier \texttt{polytechnique-LaTeX} à la racine de l'archive quelque part sur son ordinateur. Entrer dans le dossier et effectuer l'action suivante :
\begin{description}
\item[Windows] double-cliquer sur \texttt{makefile\_windows.bat} ;
\item[Linux ou Mac] ouvrir un terminal dans le dossier et y entrer la commande
\begin{verbatim}
bash makefile_unix.sh
\end{verbatim}
\end{description}
Après exécution du script, le message affiché sur la console devrait être :
\begin{verbatim}
************************************************
* Le package a ete installe ! La documentation *
* se trouve a l'emplacement suivant :          *
<chemin qui dépend de votre ordinateur>
* Les fichiers sources et resources a          *
* l'endroit suivant :                          *
<chemin qui dépend de votre ordinateur>
* Et le .sty a l'endroit suivant :             *
<chemin qui dépend de votre ordinateur>
* Bonne utilisation !                          *
************************************************
\end{verbatim}

Si ce message ne s'affiche pas ou si l'installation semble ne pas fonctionner quand vous essayez d'utiliser le package, se reporter à la méthode manuelle.
\subsubsection{Méthode manuelle}

Il faut chercher où se trouve le répertoire de ton installation LaTeX. Pour cela (et quelque soit ton système d'exploitation), ouvre une ligne de commandes et tape :
\begin{verbatim}
kpsewhich -var-value TEXMFMAIN
\end{verbatim}
Rends-toi alors dans le répertoire indiqué que l'on nommera par la suite \emph{INSTALL}. Dans une autre fenêtre de ton explorateur de fichiers, extrais l'archive téléchargée et ouvre le dossier \emph{source}. Il suffit ensuite de copier tous les fichiers \texttt{.pdf}, \texttt{.eps} et \texttt{polytechnique.sty} vers le dossier \emph{INSTALL/tex/latex/polytechnique}. 

Il te faut enfin mettre à jour la la liste de package de ta distribution. Pour Linux, ouvre un terminal et entre \texttt{sudo texhash}. Pour Mac, ouvre un terminal et entre \texttt{sudo mktexlsr}. Pour Windows, ouvre dans tous les programmes l'utilitaire \emph{Settings (Admin)} et clique sur \emph{Refresh FNDB}.

De cette manière, l'installation n'est pas complète mais le package marchera très bien en utilisation. Il te manquera par contre les fichiers source commentés si tu veux le modifier.

\subsection{Documentation}

La documentation du package est le fichier \texttt{polytechnique.pdf} qui se trouve entre autres dans le dossier \emph{source} de l'archive extraite.

\end{document}
